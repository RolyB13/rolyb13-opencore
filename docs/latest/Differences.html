<!DOCTYPE html> 
<html lang="en-US" xml:lang="en-US" > 
<head><title>Differences</title> 
<meta  charset="utf-8" /> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<meta name="viewport" content="width=device-width,initial-scale=1" /> 
<link rel="stylesheet" type="text/css" href="Differences.css" /> 
<meta name="src" content="Differences.tex" /> 
<link rel="stylesheet" type="text/css" href="../main.css" /></head><body 
><div class="center" 
>
<!--l. 142--><p class="noindent" >
</p><!--l. 149--><p class="noindent" > <img 
src="Logos/Logo-.png" alt="PIC"  
width="160" height="160"  />
</p><!--l. 153--><p class="noindent" >OpenCore
</p><!--l. 157--><p class="noindent" >Reference Manual (0.6<span class="sout">.5</span><span class="uwave">.6</span>)
</p><!--l. 161--><p class="noindent" >[2021.01.24]
</p><!--l. 169--><p class="noindent" >Copyright ©2018-2021 vit9696
</p>
</div>
                                                                                                  
                                                                                                  
     </li>
     <li class="itemize">sizeof operator should take variables instead of types where possible to be error prone. Use ARRAY_SIZE to
     obtain array size in elements. Use L_STR_LEN and L_STR_SIZE macros from OcStringLib to obtain string literal
     sizes to ensure compiler optimisation.
     </li>
     <li class="itemize">Do not use goto keyword. Prefer early return, break, or continue after failing to pass error checking instead
     of nesting conditionals.
     </li>
     <li class="itemize">Use EFIAPI, force UEFI calling convention, only in protocols, external callbacks between modules, and functions
     with variadic arguments.
     </li>
     <li class="itemize">Provide inline documentation to every added function, at least describing its inputs, outputs, precondition,
     postcondition, and giving a brief description.
     </li>
     <li class="itemize">Do not use RETURN_STATUS. Assume EFI_STATUS to be a matching superset that is to be always used when
     BOOLEAN is not enough.
     </li>
     <li class="itemize">Security violations should halt the system or cause a forced reboot.</li></ul>
<!--l. 810--><p class="noindent" >Codestyle. The codebase follows <a 
href="https://github.com/tianocore/tianocore.github.io/wiki/Code-Style-C" >EDK II codestyle</a> with few changes and clarifications. </p>
     <ul class="itemize1">
     <li class="itemize">Write inline documentation for the functions and variables only once: in headers, where a header prototype is
     available, and inline for static variables and functions.
     </li>
     <li class="itemize">Use line length of 120 characters or less, preferably 100 characters.
     </li>
     <li class="itemize">Use spaces after casts, e.g. (VOID *)(UINTN) Variable.
     </li>
     <li class="itemize">Use <span class="uwave">two spaces as indentations as always. </span>
     </li>
     <li class="itemize"><span class="uwave">Use </span>SPDX license headers as shown in <a 
href="https://github.com/acidanthera/bugtracker/issues/483" >acidanthera/bugtracker#483</a>.</li></ul>
<a 
 id="x1-12001r15"></a>
<h4 class="subsectionHead"><span class="titlemark">3.5   </span> <a 
 id="x1-130005"></a>Debugging</h4>
<!--l. 826--><p class="noindent" >The codebase incorporates EDK II debugging and few custom features to improve the experience. </p>
     <ul class="itemize1">
     <li class="itemize">Use module prefixes, 2-5 letters followed by a colon (:), for debug messages. For OpenCorePkg use OC:, for
     libraries and drivers use their own unique prefixes.
     </li>
     <li class="itemize">Do not use dots (.) in the end of debug messages and separate EFI_STATUS, printed by %r, with a hyphen (e.g.
     OCRAM: Allocation of %u bytes failed - %r\n).
     </li>
     <li class="itemize">Use DEBUG_CODE_BEGIN () and DEBUG_CODE_END () constructions to guard debug checks that may potentially
     reduce the performance of release builds and are otherwise unnecessary.
     </li>
     <li class="itemize">Use DEBUG macro to print debug messages during normal functioning, and RUNTIME_DEBUG for debugging after
     EXIT_BOOT_SERVICES.
     </li>
     <li class="itemize">Use DEBUG_VERBOSE debug level to leave debug messages for future debugging of the code, which are currently
     not necessary. By default DEBUG_VERBOSE messages are ignored even in DEBUG builds.
     </li>
     <li class="itemize">Use DEBUG_INFO debug level for all non critical messages (including errors) and DEBUG_BULK_INFO for extensive
     messages that should not appear in NVRAM log that is heavily limited in size. These messages are ignored in
     RELEASE builds.
     </li>
     <li class="itemize">Use DEBUG_ERROR to print critical human visible messages that may potentially halt the boot process, and
     DEBUG_WARN for all other human visible errors, RELEASE builds included.</li></ul>
                                                                                                  
                                                                                                  
     </li>
     <li 
  class="enumerate" id="x1-45012x5">DisplayLevel<br 
class="newline" />Type: plist integer, 64 bit<br 
class="newline" />Failsafe: 0<br 
class="newline" />Description: EDK II debug level bitmask (sum) showed onscreen. Unless Target enables console (onscreen)
     printing, onscreen debug output will not be visible. The following levels are supported (discover more in
     <a 
href="https://github.com/acidanthera/audk/blob/master/MdePkg/Include/Library/DebugLib.h" >DebugLib.h</a>):
         <ul class="itemize1">
         <li class="itemize">0x00000002 (bit 1) — DEBUG_WARN in DEBUG, NOOPT, RELEASE.
         </li>
         <li class="itemize">0x00000040 (bit 6) — DEBUG_INFO in DEBUG, NOOPT.
         </li>
         <li class="itemize">0x00400000 (bit 22) — DEBUG_VERBOSE in custom builds.
         </li>
         <li class="itemize">0x80000000 (bit 31) — DEBUG_ERROR in DEBUG, NOOPT, RELEASE.</li></ul>
     </li>
     <li 
  class="enumerate" id="x1-45014x6">SerialInit<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Perform serial port initialisation.
     <!--l. 3345--><p class="noindent" >This option will perform serial port initialisation within OpenCore prior to enabling (any) debug logging. Serial port
     configuration is defined via PCDs at compile time in gEfiMdeModulePkgTokenSpaceGuid GUID. Default values as found
     in MdeModulePkg.dec are as follows:
</p>
         <ul class="itemize1">
         <li class="itemize">PcdSerialBaudRate — Baud rate: 115200.
         </li>
         <li class="itemize">PcdSerialLineControl — Line control: no parity, 8 data bits, 1 stop bit.</li></ul>
     <!--l. 3356--><p class="noindent" >See more details in ?? section.
     </p></li>
     <li 
  class="enumerate" id="x1-45016x7">SysReport<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Produce system report on ESP folder.
     <!--l. 3364--><p class="noindent" >This option will create a SysReport directory on ESP partition unless it is already present. The directory will contain
     ACPI<span class="sout">and SMBIOSdumps. </span><span class="uwave">, SMBIOS, and audio codec dumps. Audio codec dumps require an audio backend driver to be
     loaded. </span>
     </p><!--l. 3370--><p class="noindent" >Note: For security reasons SysReport option is not available in RELEASE builds. Use a DEBUG build if this option is
     needed.
     </p></li>
     <li 
  class="enumerate" id="x1-45018x8">Target<br 
class="newline" />Type: plist integer<br 
class="newline" />Failsafe: 0<br 
class="newline" />Description: A bitmask (sum) of enabled logging targets. By default all the logging output is hidden, so this option is
     required to be set when debugging is necessary.
     <!--l. 3381--><p class="noindent" >The following logging targets are supported:
</p>
         <ul class="itemize1">
         <li class="itemize">0x01 (bit 0) — Enable logging, otherwise all log is discarded.
         </li>
         <li class="itemize">0x02 (bit 1) — Enable basic console (onscreen) logging.
                                                                                                  
                                                                                                  
     may have issues with NVRAM variable storage garbage collection or similar.
</p>
     </li></ol>
<!--l. 4197--><p class="noindent" >To read NVRAM variable value from macOS, nvram could be used by concatenating GUID and name variables separated by a
: symbol. For example, nvram 7C436110-AB2A-4BBB-A880-FE41995C9F82:boot-args.
</p><!--l. 4201--><p class="noindent" >A continuously updated variable list can be found in a corresponding document: <a 
href="https://docs.google.com/spreadsheets/d/1HTCBwfOBkXsHiK7os3b2CUc6k68axdJYdGl-TyXqLu0" >NVRAM Variables</a>.
<a 
 id="x1-50013r53"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">9.3   </span> <a 
 id="x1-510003"></a>Mandatory Variables</h4>
<!--l. 4206--><p class="noindent" >Warning: These variables may be added by ?? or <a 
href="#x1-560002">Generic</a> subsections of ?? section. Using PlatformInfo is the <span class="sout">recommend
</span><span class="uwave">recommended </span>way of setting these variables.
</p><!--l. 4212--><p class="noindent" >The following variables are mandatory for macOS functioning:
</p>
     <ul class="itemize1">
     <li class="itemize">4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14:FirmwareFeatures
     32-bit FirmwareFeatures. Present on all Macs to avoid extra parsing of SMBIOS tables<span class="uwave">. </span>
     </li>
     <li class="itemize">4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14:FirmwareFeaturesMask
     32-bit FirmwareFeaturesMask. Present on all Macs to avoid extra parsing of SMBIOS tables.
     </li>
     <li class="itemize">4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14:MLB
     BoardSerialNumber. Present on newer Macs (2013+ at least) to avoid extra parsing of SMBIOS tables, especially
     in boot.efi.
     </li>
     <li class="itemize">4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14:ROM
     Primary network adapter MAC address or replacement value. Present on newer Macs (2013+ at least) to avoid
     accessing special memory region, especially in boot.efi.</li></ul>
<a 
 id="x1-51001r54"></a>
<h4 class="subsectionHead"><span class="titlemark">9.4   </span> <a 
 id="x1-520004"></a>Recommended Variables</h4>
<!--l. 4239--><p class="noindent" >The following variables are recommended for faster startup or other improvements:
</p>
     <ul class="itemize1">
     <li class="itemize">7C436110-AB2A-4BBB-A880-FE41995C9F82:csr-active-config
     32-bit System Integrity Protection bitmask. Declared in XNU source code in <a 
href="https://opensource.apple.com/source/xnu/xnu-4570.71.2/bsd/sys/csr.h.auto.html" >csr.h</a>.
     </li>
     <li class="itemize">4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14:ExtendedFirmwareFeatures
     Combined FirmwareFeatures and ExtendedFirmwareFeatures. Present on newer Macs to avoid extra parsing
     of SMBIOS tables<span class="uwave">. </span>
     </li>
     <li class="itemize">4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14:ExtendedFirmwareFeaturesMask
     Combined FirmwareFeaturesMask and ExtendedFirmwareFeaturesMask. Present on newer Macs to avoid extra
     parsing of SMBIOS tables.
     </li>
     <li class="itemize">4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14:HW_BID
     Hardware BoardProduct (e.g. Mac-35C1E88140C3E6CF). Not present on real Macs, but used to avoid extra
     parsing of SMBIOS tables, especially in boot.efi.
     </li>
     <li class="itemize">4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14:HW_MLB
     Hardware BoardSerialNumber. Override for MLB. Present on newer Macs (2013+ at least).
     </li>
     <li class="itemize">4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14:HW_ROM
     Hardware ROM. Override for ROM. Present on newer Macs (2013+ at least).
                                                                                                  
                                                                                                  
     
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
                                                                                                  
                                                                                                  
     
     
      
     
     
     
      
     
     
     
      
     
     
                

     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
     
      
     
                                                                                               </body>
</html>